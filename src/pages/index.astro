---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import YouTubeEmbed from "../components/YouTubeEmbed.astro";
import TestimonialCard from "../components/TestimonialCard.astro";
import { getSettings } from "../lib/db";

let settings: any = {};
try {
  settings = await getSettings();
} catch (e) {
  console.error("Error loading settings:", e);
}

const youtubeLink =
  settings.youtube_preview || "https://www.youtube.com/embed/dQw4w9WgXcQ";
---

<BaseLayout title="Beranda">
  <Header />

  <main>
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="hero-content">
          <div class="version-badge">
            <span class="online-indicator"></span>
            FunSkripsi Version v1.0
          </div>
          <h1>
            Selesaikan Skripsi Lebih <span class="text-highlight"
              >Cepat dengan AI</span
            >
          </h1>
          <p>
            Dapatkan koleksi prompt AI berkualitas tinggi yang dirancang khusus
            untuk membantu mahasiswa menyusun skripsi, proposal, dan artikel
            ilmiah.
          </p>
          <div class="hero-actions">
            <a href="/prompt" class="btn btn-primary btn-lg"
              >Lihat Katalog Prompt</a
            >
            <a href="#cara-kerja" class="btn btn-secondary btn-lg"
              >Pelajari Cara Kerja</a
            >
            <a
              href="https://chat.whatsapp.com/E11OBc0aVjqJyCCZi8LsXW"
              target="_blank"
              class="btn btn-secondary btn-lg"
            >
              <i class="bi bi-whatsapp"></i> Mari Diskusi
            </a>
          </div>
        </div>
        <div class="hero-image">
          <div class="hero-illustration">
            <!-- Simplified abstract illustration -->
            <svg
              width="400"
              height="400"
              viewBox="0 0 400 400"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="200" cy="200" r="150" fill="#eff6ff"></circle>
              <circle cx="200" cy="200" r="100" fill="#dbeafe"></circle>
              <rect
                x="140"
                y="120"
                width="120"
                height="160"
                rx="8"
                fill="white"
                stroke="#3b82f6"
                stroke-width="2"></rect>
              <rect x="160" y="150" width="80" height="6" rx="3" fill="#e2e8f0"
              ></rect>
              <rect x="160" y="170" width="80" height="6" rx="3" fill="#e2e8f0"
              ></rect>
              <rect x="160" y="190" width="60" height="6" rx="3" fill="#e2e8f0"
              ></rect>
              <circle cx="260" cy="260" r="30" fill="#3b82f6" fill-opacity="0.2"
              ></circle>
              <path
                d="M260 250 L260 270 M250 260 L270 260"
                stroke="#3b82f6"
                stroke-width="3"
                stroke-linecap="round"></path>
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- Features/Cara Kerja -->
    <section id="cara-kerja" class="section bg-gray">
      <div class="container">
        <div class="section-title">
          <h2>Cara Kerja</h2>
          <p>
            Tiga langkah mudah untuk mendapatkan bantuan AI dalam penulisan
            akademik Anda.
          </p>
        </div>

        <div class="steps-grid">
          <div class="step-card">
            <div class="step-icon">
              <i class="bi bi-search"></i>
            </div>
            <h3>1. Pilih Topik</h3>
            <p>
              Telusuri katalog kami dan pilih kategori prompt yang sesuai dengan
              kebutuhan penelitian Anda (Kuantitatif/Kualitatif).
            </p>
          </div>

          <div class="step-card">
            <div class="step-icon">
              <i class="bi bi-credit-card"></i>
            </div>
            <h3>2. Lakukan Pembayaran</h3>
            <p>
              Selesaikan pembayaran dengan mudah menggunakan QRIS melalui
              e-wallet atau mobile banking favorit Anda.
            </p>
          </div>

          <div class="step-card">
            <div class="step-icon">
              <i class="bi bi-rocket-takeoff"></i>
            </div>
            <h3>3. Terima Prompt</h3>
            <p>
              Dapatkan akses instan ke file prompt lengkap beserta panduan
              penggunaan via WhatsApp setelah konfirmasi.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Video Preview -->
    <section class="section">
      <div class="container">
        <div class="video-grid">
          <div class="video-content">
            <h2>Lihat Demo Penggunaan</h2>
            <p>
              Tonton video singkat ini untuk melihat bagaimana prompt kami dapat
              mempercepat proses penulisan skripsi Anda hingga 10x lebih cepat.
            </p>
            <ul class="check-list">
              <li>
                <i class="bi bi-check-circle-fill"></i> Hemat waktu riset pustaka
              </li>
              <li>
                <i class="bi bi-check-circle-fill"></i> Struktur penulisan yang akademis
              </li>
              <li>
                <i class="bi bi-check-circle-fill"></i> Analisis data yang lebih tajam
              </li>
            </ul>
          </div>
          <div class="video-wrapper">
            <YouTubeEmbed
              url={youtubeLink}
              title="Demo Penggunaan Prompt Skripsi"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section id="testimoni" class="section bg-gray">
      <div class="container">
        <div class="section-title">
          <h2>Kata Mereka</h2>
          <p>
            Mahasiswa yang telah terbantu menyelesaikan skripsi dengan prompt
            kami.
          </p>
        </div>

        <div class="testimonials-grid">
          <TestimonialCard
            name="Sarah Amalia"
            role="Mahasiswa Ekonomi"
            content="Awalnya bingung mulai dari mana, tapi prompt ini bener-bener ngebantu banget buat bikin kerangka dan ide pembahasan. Skripsiku kelar 2 bulan lebih cepat!"
            rating={5}
          />
          <TestimonialCard
            name="Budi Santoso"
            role="Mahasiswa Teknik"
            content="Prompt untuk metodologi penelitiannya sangat detail. Sangat membantu untuk menyusun bab 3 yang biasanya paling susah."
            rating={5}
          />
          <TestimonialCard
            name="Dina Pertiwi"
            role="Mahasiswa Psikologi"
            content="Worth it banget! Harganya terjangkau buat mahasiswa, tapi manfaatnya luar biasa. Revisi dari dosen jadi minim banget."
            rating={4}
          />
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
      <div class="container">
        <div class="cta-content">
          <h2>Siap Menyelesaikan Skripsi?</h2>
          <p>
            Jangan biarkan writer's block menghambat kelulusanmu. Dapatkan
            bantuan AI sekarang juga.
          </p>
          <a href="/prompt" class="btn btn-primary btn-lg">
            Mulai Sekarang <i class="bi bi-arrow-right"></i>
          </a>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  /* Hero Section */
  .hero-section {
    padding: 5rem 0;
    overflow: hidden;
    background-color: var(--white);
    background-image:
      linear-gradient(rgba(37, 99, 235, 0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(37, 99, 235, 0.05) 1px, transparent 1px);
    background-size: 40px 40px;
    background-position: center top;
    position: relative;
  }

  .hero-content {
    max-width: 600px;
    position: relative;
    z-index: 1;
  }

  .version-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.35rem 0.85rem;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    color: var(--gray-600);
    font-size: 0.85rem;
    font-weight: 500;
    margin-bottom: 1.25rem;
    box-shadow: var(--shadow-sm);
  }

  .online-indicator {
    width: 8px;
    height: 8px;
    background-color: var(--success);
    border-radius: 50%;
    position: relative;
  }

  .online-indicator::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    background-color: var(--success);
    border-radius: 50%;
    animation: pulse 2s infinite;
    opacity: 0.5;
    z-index: -1;
  }

  @keyframes pulse {
    0% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.5;
    }
    100% {
      transform: translate(-50%, -50%) scale(3);
      opacity: 0;
    }
  }

  .hero-content h1 {
    font-size: 3rem;
    margin-bottom: 1.5rem;
    color: var(--gray-900);
    letter-spacing: -0.03em;
  }

  .text-highlight {
    color: #2563eb; /* primary-600 */
    font-weight: 700;
  }

  .hero-content p {
    font-size: 1.25rem;
    color: var(--gray-600);
    margin-bottom: 2.5rem;
    line-height: 1.6;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .hero-image {
    flex: 1;
    display: flex;
    justify-content: center;
    position: relative;
  }

  .hero-illustration svg {
    max-width: 100%;
    height: auto;
  }

  /* Steps Grid */
  .bg-gray {
    background-color: var(--gray-50);
  }

  .steps-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }

  .step-card {
    background: var(--white);
    padding: 2rem;
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    text-align: center;
    transition: all var(--transition);
  }

  .step-card:hover {
    border-color: var(--primary-300);
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
  }

  .step-icon {
    width: 64px;
    height: 64px;
    background: var(--primary-50);
    color: var(--primary-600);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.75rem;
    margin: 0 auto 1.5rem;
  }

  .step-card h3 {
    margin-bottom: 1rem;
    color: var(--gray-900);
  }

  /* Video Grid */
  .video-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  .video-content h2 {
    margin-bottom: 1.5rem;
  }

  .check-list {
    list-style: none;
    margin-top: 2rem;
  }

  .check-list li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    font-weight: 500;
    color: var(--gray-700);
  }

  .check-list i {
    color: var(--success);
    font-size: 1.25rem;
  }

  .video-wrapper {
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
  }

  /* Testimonials */
  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }

  /* CTA Section */
  .cta-section {
    padding: 6rem 0;
    text-align: center;
    background-color: var(--white);
  }

  .cta-content {
    max-width: 700px;
    margin: 0 auto;
    background-color: var(--primary-50);
    padding: 4rem 2rem;
    border-radius: var(--radius-xl);
    border: 1px solid var(--primary-100);
  }

  .cta-content h2 {
    margin-bottom: 1rem;
    color: var(--gray-900);
  }

  .cta-content p {
    margin-bottom: 2rem;
    color: var(--gray-600);
    font-size: 1.125rem;
  }

  @media (max-width: 1024px) {
    .container {
      flex-direction: column;
    }

    .hero-image {
      width: 100%;
      margin-top: 2rem;
    }

    .hero-content {
      text-align: center;
      margin: 0 auto;
    }

    .hero-actions {
      justify-content: center;
    }

    .steps-grid,
    .testimonials-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .video-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 640px) {
    .hero-content h1 {
      font-size: 2.5rem;
    }

    .steps-grid,
    .testimonials-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
